<div align="center">
    <h1>ü§° alaqubot</h1>
    <img height="20" alt="Python 3.11+" src="https://img.shields.io/badge/python-3.11+-blue">
    <img height="20" alt="License Apache 2.0" src="https://img.shields.io/badge/license-MIT-green">
    <img height="20" alt="Status" src="https://img.shields.io/badge/status-release-red">
    <p><strong>alaqubot</strong> ‚Äî —ç—Ç–æ twitch-–±–æ—Ç –¥–ª—è —Å—Ç—Ä–∏–º–µ—Ä–∞ alaqu1337</p>
    <blockquote>(‚îÄ‚Äø‚Äø‚îÄ)</blockquote>
</div>

---

```
 ______   ___                             ____            __
/\  _  \ /\_ \                           /\  _`\         /\ \__
\ \ \L\ \\//\ \      __       __   __  __\ \ \L\ \    ___\ \ ,_\
 \ \  __ \ \ \ \   /'__`\   /'__`\/\ \/\ \\ \  _ <'  / __`\ \ \/
  \ \ \/\ \ \_\ \_/\ \L\.\_/\ \L\ \ \ \_\ \\ \ \L\ \/\ \L\ \ \ \_
   \ \_\ \_\/\____\ \__/.\_\ \___, \ \____/ \ \____/\ \____/\ \__\
    \/_/\/_/\/____/\/__/\/_/\/___/\ \/___/   \/___/  \/___/  \/__/
                                 \ \_\
                                  \/_/

```

## **üìÇ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**

```bash
alaqubot/
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ commands/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main_commands.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fun_commands.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utility_commands.py
‚îÇ   ‚îú‚îÄ‚îÄ events/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ on_message.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ on_ready.py
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cooldown.py         # --- –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –∫–æ–º–∞–Ω–¥ ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ get_currency.py     # --- –∫—É—Ä—Å –¥–æ–ª–ª–∞—Ä–∞ ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ get_stream.py       # --- –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–æ —Å—Ç—Ä–∏–º ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fact.py             # --- —Å–ª—É—á–∞–π–Ω—ã–π —Ñ–∞–∫—Ç ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cards.py            # --- —Å–ª—É—á–∞–π–Ω–∞—è –∫–∞—Ä—Ç–∞ ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ horoscope.py        # --- –≥–æ—Ä–æ—Å–∫–æ–ø ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ translate.py        # --- –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ weather.py          # --- –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–≥–æ–¥—ã ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ film.py             # --- —Ä–∞–Ω–¥–æ–º —Ñ–∏–ª—å–º ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ uptime.py           # --- –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞ ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register_command.py # --- —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ permission.py       # --- –ø—Ä–∞–≤–∞ –∫–æ–º–∞–Ω–¥ ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ load_commands.py    # --- –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–∞–Ω–¥ –∫–∞–Ω–∞–ª–æ–≤ ---
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache.py            # --- –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ ---
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.py           # --- –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ---
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ bot.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îî‚îÄ‚îÄ heroes.py
‚îÇ
‚îú‚îÄ‚îÄ alaqubot.py # --- entrypoint ---
‚îÇ
‚îú‚îÄ‚îÄ alaqu.jpg
‚îÇ
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ LICENSE
```

## **üåê –∫–æ–º–∞–Ω–¥—ã**

```
--- main ---
- !–∫–æ–º–∞–Ω–¥—ã
- !—Ç–≥
- !–≥–∞–π–¥
- !–º–µ–π–Ω
- !–∞–≤—Ç–æ—Ä

--- fun ---
- !—Å–ø–∏–Ω
- !–º–æ–Ω–µ—Ç–∫–∞
- !—Ä–æ–ª–ª
- !—É–¥–∞—Ä
- !—à–∞—Ä
- !–∫–∞—Ä—Ç—ã
- !—Ñ–∞–∫—Ç
- !–∑–æ–Ω–∞

--- utility ---
- !–¥–æ–ª–ª–∞—Ä
- !–≥–æ—Ä–æ—Å–∫–æ–ø
- !–ø–æ–≥–æ–¥–∞
- !–ø–µ—Ä–µ–≤–æ–¥
- !—Ñ–∏–ª—å–º
```

---

[src/bot.py](/src/bot.py)
``` python
from twitchAPI.twitch import Twitch
from twitchAPI.type import AuthScope, ChatEvent
from twitchAPI.chat import Chat

from .config import CLIENT_ID, CLIENT_SECRET, CHANNELS, TOKEN, REFRESH_TOKEN, LOG_PATH

from .events import MessageEvent, ReadyEvent
from .commands import MainCommands, FunCommands, UtilityCommands
from .utils import LogManager, get_commands
        
import asyncio
class Bot:
    def __init__(self):
        self.USER_SCOPE = [AuthScope.CHAT_READ, AuthScope.CHAT_EDIT]
        self.log = LogManager(LOG_PATH).logger
        
        self.message_event = MessageEvent(LOG_PATH)
        self.ready_event = ReadyEvent(LOG_PATH, CHANNELS)
        
        self.main_commands =  MainCommands()
        self.fun_commands = FunCommands()
        self.utility_commands = UtilityCommands(LOG_PATH)
    
    async def run(self):
        while True:
            try:
                self.log.info("init")
                self.twitch = Twitch(CLIENT_ID, CLIENT_SECRET)
                await self.twitch.set_user_authentication(TOKEN, self.USER_SCOPE, REFRESH_TOKEN)
                        
                self.chat = await Chat(self.twitch)
                self.chat.no_message_reset_time = 5
                    
                await self.register_events()
                await self.register_commands()
                
                self.chat.start()
                
                while True:
                    await asyncio.sleep(60)
                
            except Exception as e:
                self.log.critical(e)
                self.log.info("restart")
            finally:
                if hasattr(self, 'chat'):
                    self.chat.stop()
                await self.twitch.close()
            await asyncio.sleep(15)

    async def register_events(self):
        self.chat.register_event(ChatEvent.MESSAGE, self.message_event.on_message)
        self.chat.register_event(ChatEvent.READY, self.ready_event.on_ready)
    
    async def register_commands(self):
        commands = get_commands()
        for cmd_name, (func, owner_name, is_public) in commands.items():
            target = None
            for candidate in (self.main_commands, self.fun_commands, self.utility_commands):
                if candidate.__class__.__name__ == owner_name:
                    target = candidate
                    break

            if target is None:
                target = self.main_commands

            bound = func.__get__(target, target.__class__)
            self.chat.register_command(cmd_name, bound)
```

---

## **üß© –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
[requirements.txt](/requirements.txt)
```bash
# --- twitch ---
# --- twitch ---
twitchAPI==4.5.0

# --- config ---
environs==14.3.0

# --- database ---
cachetools==6.2.4

# --- logs ---
loguru==0.7.3

# --- web ---
aiohttp==3.12.15
beautifulsoup4==4.13.5

# --- api ---
deep-translator==1.11.4

# --- cli ---
pyfiglet==1.0.4
termcolor==3.3.0
```

